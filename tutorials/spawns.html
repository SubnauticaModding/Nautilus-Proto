<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
      <title>Adding Spawns </title>
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      <meta name="title" content="Adding Spawns ">
      
      <link rel="icon" href="../favicon.ico">
      <link rel="stylesheet" href="../public/docfx.min.css">
      <link rel="stylesheet" href="../public/main.css">
      <meta name="docfx:navrel" content="../toc.html">
      <meta name="docfx:tocrel" content="toc.html">
      
      <meta name="docfx:rel" content="../">
      
      
      <meta name="docfx:docurl" content="https://github.com/SubnauticaModding/Nautilus/blob/docs/Nautilus/Documentation/tutorials/spawns.md/#L1">

      <script type="module">
        import docfx from './../public/main.js'
        window.docfx = docfx
        window.MathJax = {
          options: {
            processHtmlClass: ['tex2jax_process', 'math']
          }
        }
      </script>
      <script type="text/javascript" src="../public/docfx.min.js"></script>
  </head>


  <body class="tex2jax_ignore" data-layout="" data-yaml-mime="">
    <header class="bg-body border-bottom">
      <nav id="autocollapse" class="navbar navbar-expand-md" role="navigation">
        <div class="container-xxl flex-nowrap">
          <a class="navbar-brand" href="../index.html">
            <img id="logo" class="svg" src="../logo.svg" alt="">
            
          </a>
          <button class="btn btn-lg d-md-none border-0" type="button" data-bs-toggle="collapse" data-bs-target="#navpanel" aria-controls="navpanel" aria-expanded="false" aria-label="Toggle navigation">
            <i class="bi bi-three-dots"></i>
          </button>
          <div class="collapse navbar-collapse" id="navpanel">
            <div id="navbar">
              <form class="search" role="search" id="search">
                <i class="bi bi-search"></i>
                <input class="form-control" id="search-query" type="search" disabled="" placeholder="Search" autocomplete="off" aria-label="Search">
              </form>
            </div>
          </div>
        </div>
      </nav>
    </header>

    <main class="container-xxl">
      <div class="toc-offcanvas">
        <div class="offcanvas-md offcanvas-start" tabindex="-1" id="tocOffcanvas" aria-labelledby="tocOffcanvasLabel">
          <div class="offcanvas-header">
            <h5 class="offcanvas-title" id="tocOffcanvasLabel">Table of Contents</h5>
            <button type="button" class="btn-close" data-bs-dismiss="offcanvas" data-bs-target="#tocOffcanvas" aria-label="Close"></button>
          </div>
          <div class="offcanvas-body">
            <nav class="toc" id="toc"></nav>
          </div>
        </div>
      </div>

      <div class="content">
        <div class="actionbar">
          <button class="btn btn-lg border-0 d-md-none" style="margin-top: -.65em; margin-left: -.8em" type="button" data-bs-toggle="offcanvas" data-bs-target="#tocOffcanvas" aria-controls="tocOffcanvas" aria-expanded="false" aria-label="Show table of contents">
            <i class="bi bi-list"></i>
          </button>

          <nav id="breadcrumb"></nav>
        </div>

        <article data-uid="">
<h1 id="adding-spawns">Adding Spawns</h1>

<p>Most of the time in Subnautica, the game uses two different ways to spawn objects; static spawns that always have a fixed position in the world to spawn in,
and loot distribution which is biome-based and sudo-random.</p>
<p>Nautilus offers modders to add spawns to either systems. You can add spawns for your own custom item, you can also edit vanilla spawns,
or straight up remove them.</p>
<h2 id="coordinated-spawns">Coordinated Spawns</h2>
<p>Coordinated spawns is Nautilus' version of the aforementioned static spawns. With this system, you are allowed to specify exact world position and rotation spawns for an item.<br>
You may register one or more coordinated spawn(s) for any item by providing either their class ID, or their tech type.</p>
<h3 id="examples">Examples</h3>
<p>The following examples demonstrate the usage of <a class="xref" href="../api/Nautilus.Handlers.CoordinatedSpawnsHandler.html">CoordinatedSpawnsHandler</a> methods.</p>
<pre><code class="lang-csharp">private void Awake()
{
    // Adds a Reaper Leviathan to the lava lakes
    SpawnInfo reaperInfo = new SpawnInfo(TechType.ReaperLeviathan, new Vector3(280f, -1400f, 47f)); // Lava Lakes
    CoordinatedSpawnsHandler.RegisterCoordinatedSpawn(reaperInfo);
	
	// Adds multiple spawn infos at once
	
	// Sand Shark's class ID
	string sandSharkId = &quot;5e5f00b4-1531-45c0-8aca-84cbd3b580a4&quot;;
		
	var spawnInfos = new List&lt;SpawnInfo&gt;() 
	{
		new SpawnInfo(TechType.Seamoth, Vector3.zero),
		new SpawnInfo(sandSharkId, new Vector3(10, -4, 5), Vector3.up * 90f) // rotate its Y axis 90 degrees
	}
	CoordinatedSpawnsHandler.RegisterCoordinatedSpawns(spawnInfos);
	
	// Spawns a batch of titaniums around 10, -3, 15 world position
	var randomPositions = RandomPositions(new Vector3(10f, -3f, 15f));
	CoordinatedSpawnsHandler.RegisterCoordinatedSpawnsForOneTechType(
		TechType.Titanium, randomPositions);
}

private List&lt;Vector3&gt; RandomPositions(Vector3 centerPosition)
{
    var result = new List&lt;Vector3&gt;();
    for (int i = 0; i &lt; 5; i++)
    {
        result.Add(centerPosition + (Random.insideUnitSphere * i));
    }
    return result;
}
</code></pre>
<p>For custom prefabs, it is advised to use the <a class="xref" href="../api/Nautilus.Assets.Gadgets.GadgetExtensions.html#Nautilus_Assets_Gadgets_GadgetExtensions_SetSpawns_Nautilus_Assets_ICustomPrefab_Nautilus_Assets_SpawnLocation___">ICustomPrefab.SetSpawns(SpawnLocation[])</a> method instead of directly interacting with the <a class="xref" href="../api/Nautilus.Handlers.CoordinatedSpawnsHandler.html">CoordinatedSpawnsHandler</a> class.</p>
<p>The example below demonstrates the usage of the <code>SetSpawns</code> method.</p>
<pre><code class="lang-csharp">var blueReaper = new CustomPrefab(&quot;BlueReaper&quot;, &quot;Blue Reaper Leviathan&quot;, null);
           
// Creates a clone of the Reaper Leviathan prefab and colors it blue, then set the new prefab as our Blue Reaper's game object.          
var blueReaperPrefab = new CloneTemplate(blueReaper.Info, TechType.ReaperLeviathan)
{
    ModifyPrefab = prefab =&gt; prefab.GetComponentsInChildren&lt;Renderer&gt;().ForEach(r =&gt; r.materials.ForEach(m =&gt; m.color = Color.blue))
};                                               
blueReaper.SetGameObject(blueReaperPrefab);

// Adds a spawn for our Blue Reaper Leviathan in the lava lakes.
blueReaper.SetSpawns(new SpawnLocation(280f, -1400, 47f));

// Register the Blue Reaper Leviathan to the game.
blueReaper.Register();
</code></pre>
<h2 id="loot-distribution">Loot Distribution</h2>
<p>Loot distribution system is by far the most widely used spawning system in the game. Unlike static spawns, Nautilus does not have it's own version of this system, so
we will be registering distributions into the game's system.<br>
Loot distribution only allows adding or editing distributions using a class ID and prefab file name. You normally will also need to provide a biome type, probability, and count for each loot you want to add.</p>
<p>Below is a table of all the parameters you may interact with in the loot distribution system.</p>
<table>
<thead>
<tr>
<th>Parameter Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>classId</td>
<td>string</td>
<td>The classId of the entity to add loot for.</td>
</tr>
<tr>
<td>prefabFileName</td>
<td>string</td>
<td>The internal file path of the entity to add.</td>
</tr>
<tr>
<td>biomeDistribution</td>
<td>LootDistributionData.BiomeData</td>
<td>The biome data in which this entity might spawn in.</td>
</tr>
<tr>
<td>probability</td>
<td>float</td>
<td>The chance of this entity spawning. This value can only be between 0-1 inclusive. 0 being no chance of spawning, while 1 is guaranteed to spawn.</td>
</tr>
<tr>
<td>count</td>
<td>float</td>
<td>Multiplies 1 with this value. This multiplication is accounted everytime this entity has the highest chance to spawn, not a global count.</td>
</tr>
<tr>
<td>srcData</td>
<td>LootDistributionData.SrcData</td>
<td>A class that combines the prefab file name and biome distribution to one data type.</td>
</tr>
<tr>
<td>entityInfo</td>
<td>WorldEntityInfo</td>
<td>Contains information on how to spawn this entity. E.G: The size it should spawn in as, and how far it can stay before unloading.</td>
</tr>
</tbody>
</table>
<div class="WARNING">
<h5>Warning</h5>
<p>An Entity Info for each class ID to spawn via loot distribution is required. If an entity info does not have one, the loot distribution will ignore it.</p>
</div>
<div class="NOTE">
<h5>Note</h5>
<p>Usually, vanilla prefabs do have a world entity info assigned to them. While you can, you don't have to register a new one for those that already have one.</p>
</div>
<h3 id="examples-1">Examples</h3>
<p>The following examples demonstrate the usage of <a class="xref" href="../api/Nautilus.Handlers.LootDistributionHandler.html">LootDistributionHandler</a> methods.</p>
<pre><code class="lang-csharp">// Drillable Sulphur's class ID
string drillableSulphurClassId = &quot;697beac5-e39a-4809-854d-9163da9f997e&quot;;

var biomes = new LootDistribution.BiomeData[]
{
 // Lost river's bones field ground
 new LootDistributionData.BiomeData { biome = BiomeType.BonesField_Ground, count = 1, probability = 0.07f },
 
 // Inactive Lava Zone floor, near the lava
 new LootDistributionData.BiomeData { biome = BiomeType.InactiveLavaZone_Chamber_Floor_Far, count = 1, probability = 0.05f }
};

// Add spawn for the drillable sulphur
LootDistributionHandler.AddLootDistributionData(drillableSulphurClassId, biomes);

string rockgrubClassId = CraftData.GetClassIdForTechType(TechType.Rockgrub);

// Prevents the rockgrub from spawning in the Bulb zone caves.
LootDistributionHandler.EditLootDistributionData(rockgrubClassId, BiomeType.KooshZone_CaveWall, 0f, 0);
</code></pre>
<p>For custom prefabs, it is advised to use the <a class="xref" href="../api/Nautilus.Assets.Gadgets.GadgetExtensions.html#Nautilus_Assets_Gadgets_GadgetExtensions_SetSpawns_Nautilus_Assets_ICustomPrefab_Nautilus_Assets_SpawnLocation___">ICustomPrefab.SetSpawns(LootDistributionData.BiomeData[])</a> method instead of directly interacting with the <a class="xref" href="../api/Nautilus.Handlers.LootDistributionHandler.html">LootDistributionHandler</a> class.</p>
<p>The example below demonstrates the usage of the <code>SetSpawns</code> method.</p>
<pre><code class="lang-csharp">// Set the vanilla titanium icon for our item
CustomPrefab titaniumClone = new CustomPrefab(&quot;TitaniumClone&quot;, &quot;Titanium Clone&quot;, &quot;Titanium clone that makes me go yes.&quot;, SpriteManager.Get(TechType.Titanium));

// Creates a clone of the Titanium prefab and colors it red, then set the new prefab as our Titanium Clone's game object.  
PrefabTemplate cloneTemplate = new CloneTemplate(titaniumClone.Info, TechType.Titanium)
{
    // Callback to change all material colors of this clone to red.
    ModifyPrefab = prefab =&gt; prefab.GetComponentsInChildren&lt;Renderer&gt;().ForEach(r =&gt; r.materials.ForEach(m =&gt; m.color = Color.red))
};
titaniumClone.SetGameObject(cloneTemplate);

titaniumClone.SetSpawns(
        // Adds a chance for our titanium clone to spawn in Safe shallows grass, x4 each time.
        new BiomeData { biome = BiomeType.SafeShallows_Grass, count = 4, probability = 0.1f },
        // Adds a chance for our titanium clone to spawn in Safe shallows caves, once each time.
        new BiomeData { biome = BiomeType.SafeShallows_CaveFloor, count = 1, probability = 0.4f });

// Register the Titanium Clone to the game.
titaniumClone.Register();
</code></pre>
<h2 id="see-also">See also</h2>
<ul>
<li><a class="xref" href="../api/Nautilus.Handlers.CoordinatedSpawnsHandler.html">CoordinatedSpawnsHandler</a></li>
<li><a class="xref" href="../api/Nautilus.Handlers.LootDistributionHandler.html">LootDistributionHandler</a></li>
</ul>
</article>

        <div class="contribution d-print-none">
          <a href="https://github.com/SubnauticaModding/Nautilus/blob/docs/Nautilus/Documentation/tutorials/spawns.md/#L1" class="edit-link">Edit this page</a>
        </div>

        <div class="next-article d-print-none border-top" id="nextArticle"></div>
        
      </div>

      <div class="affix">
        <nav id="affix"></nav>
      </div>
    </main>

    <div class="container-xxl search-results" id="search-results"></div>

    <footer class="border-top">
      <div class="container-xxl">
        <div class="flex-fill">
          <span>Made with <a href="https://dotnet.github.io/docfx">docfx</a></span>
        </div>
      </div>
    </footer>
  </body>
</html>